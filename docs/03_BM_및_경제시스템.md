# Cute Pomodoro — BM 및 경제 시스템

---

## 1. 현재 수익화 현황

| 항목 | 상태 |
|------|------|
| 실제 결제 | **없음** |
| 구독 모델 | **없음** |
| 프리미엄 콘텐츠 잠금 | **없음** |
| 광고 | **없음** |
| 현재 BM | **완전 무료 (F2P)** |

> 현재는 게임 경제 시스템만 구현되어 있으며, 실제 수익화는 적용되지 않음.

---

## 2. 재화 구조

### 단일 재화: 코인 (🪙)

Cute Pomodoro는 코인 1종의 단일 재화 구조를 가짐.

| 항목 | 설명 |
|------|------|
| 재화명 | 코인 |
| 이모지 | 🪙 |
| 상한 | 없음 (무한 보유 가능) |
| 저장 위치 | localStorage (`cute-pomodoro-v2`) + Supabase `user_profiles.coins` |

---

## 3. 코인 획득 경로

### 3-1. 집중 세션 완료

- 집중 모드(25분) 타이머 완료 시 **50코인** 자동 지급
- 타이머 도중 리셋 / 휴식 모드 완료 시는 지급 없음
- 하루 집중 횟수에 제한 없음 → 코인 무제한 획득 가능

### 3-2. 업적 달성

| 업적 | 보상 | 달성 난이도 |
|------|------|------------|
| 퍼스트! (ach_first) | 50코인 | 매우 쉬움 |
| 핫스트릭 (ach_streak3) | 100코인 | 보통 |
| 불꽃 학습자 (ach_streak7) | 300코인 | 어려움 |
| 스피드러너 (ach_speed) | 200코인 | 보통 (미구현) |
| 학자 (ach_scholar) | 500코인 | 매우 어려움 (미구현) |
| 야간학습자 (ach_night) | 80코인 | 쉬움 |
| 새벽학습자 (ach_dawn) | 80코인 | 쉬움 |
| 연금술사 (ach_craft) | 150코인 | 보통 |
| 소셜버터플라이 (ach_friends) | 100코인 | 쉬움 |
| 컬렉터 (ach_3star) | 200코인 | 보통 |
| **업적 총합** | **1,760코인** | |

### 3-3. 코인 획득 시뮬레이션

| 상황 | 시간당 코인 | 설명 |
|------|------------|------|
| 기본 타이머 반복 | ~50코인/30분 | 25분 집중 + 5분 휴식 1세트 |
| 업적 포함 초기 | 약 2,000코인 이상 | 초반 업적 대부분 첫날 달성 |

---

## 4. 코인 소비 경로

### 상점 — 아이템 박스 구매

| 박스명 | 가격 | 희귀도 분포 | 이모지 |
|--------|------|------------|--------|
| 일반 박스 | **100코인** | 1★ 70% / 2★ 20% / 3★ 10% | 📦 |
| 프리미엄 박스 | **300코인** | 1★ 40% / 2★ 40% / 3★ 20% | ✨ |
| 전설 박스 | **600코인** | 2★ 50% / 3★ 50% (1★ 없음) | 🌟 |

> 현재 코인을 소비하는 경로는 **상점 박스 구매가 유일**.

---

## 5. 가챠 시스템 상세

### 5-1. 기본 박스 (무료 — 집중 세션 완료 보상)

- 집중 타이머 완료 시 자동으로 **기본 박스** 1회 추첨
- 코인 소모 없음
- 드롭율: **1★ 70% / 2★ 20% / 3★ 10%**

### 5-2. 박스별 드롭 로직

```
1. 희귀도 결정 (랜덤 0~100)
   - 일반 박스: 0~70 → 1★, 70~90 → 2★, 90~100 → 3★
   - 프리미엄 박스: 0~40 → 1★, 40~80 → 2★, 80~100 → 3★
   - 전설 박스: 0~50 → 2★, 50~100 → 3★

2. 해당 희귀도 내 아이템 풀에서 균등 확률로 1개 선택
   (캐릭터 호환 아이템만 포함)

3. 폴백: 해당 희귀도 풀이 비어있으면 1★ 풀에서 선택
```

### 5-3. 캐릭터별 박스 풀 크기

| 희귀도 | 고양이(cat) 풀 | 여우(fox) 풀 |
|--------|--------------|------------|
| 1★ | 7개 (배경4 + 악세서리3 + cat스킨1) | 7개 (배경4 + 악세서리3 + fox스킨1) |
| 2★ | 5개 (배경2 + 악세서리2 + cat스킨1) | 5개 (배경2 + 악세서리2 + fox스킨1) |
| 3★ | 5개 (배경2 + 악세서리2 + cat스킨1) | 5개 (배경2 + 악세서리2 + fox스킨1) |

---

## 6. 합성 시스템 경제 분석

### 합성 비용
- 투입: 같은 희귀도 아이템 **10개** (인벤토리에서 소모)
- 획득: 새 아이템 **1개** (확률적 등급 변환)

### 합성 기대값

| 입력 | 기대 등급 | 실질 효과 |
|------|----------|----------|
| 1★ × 10 | 평균 1.55★ | 55% 확률로 2★ 업그레이드, 손해 없음 |
| 2★ × 10 | 평균 2.45★ | 50% 확률로 3★ 업그레이드, 5% 1★ 손실 리스크 |
| 3★ × 10 | 3★ 보장 | 다른 3★ 아이템으로 교환 개념 |

### 합성과 코인 경제의 관계
- 합성은 코인을 소모하지 않음 (아이템만 소모)
- 중복 아이템을 상위 등급으로 전환하는 **업그레이드 수단**
- 3★ 수집 → 업적 `ach_3star` → 200코인 보상

---

## 7. 경제 밸런스 현황

### 코인 순환 속도 (1일 기준, 일반 사용자 추정)

| 행동 | 코인 변화 | 가정 |
|------|----------|------|
| 집중 4세트 (2시간) | +200코인 | 8회 집중 완료 |
| 일반 박스 구매 2회 | -200코인 | |
| **순 코인 변화** | **0코인** | 균형 상태 |

- 2시간 집중 = 일반 박스 2회 구매 가능
- 프리미엄 박스(300코인)는 약 3시간 집중 필요
- 전설 박스(600코인)는 약 6시간 집중 필요

### 현재 밸런스 평가
- **코인 인플레이션 위험 낮음**: 소비처가 박스 구매 1가지뿐이라 코인이 쌓이기 쉬움
- **수집 진행감 충분**: 무료 가챠(세션 완료 보상) + 상점 구매 병행으로 꾸준한 아이템 획득 가능
- **3★ 획득 난이도**: 기본 박스 10% 확률 → 평균 10세션(약 4.2시간 집중)에 1회

---

## 8. 향후 BM 방향 검토 (미결정)

> 아래 내용은 구현 계획 없이 검토를 위한 아이디어 목록임.

### 옵션 A: 광고 기반 (비침습적)
- 광고 시청 → 박스 추가 획득
- 사용자 경험 영향 최소화

### 옵션 B: 프리미엄 구독
- 월 구독 시 코인 보너스 (예: 세션당 +25코인 추가)
- 독점 아이템 (구독자 전용 배경/스킨)
- 구독 해지 시 독점 아이템 잠금 처리 필요

### 옵션 C: 아이템 직접 구매 (IAP)
- 전설 박스를 실제 결제로 구매
- 소액결제 규제 고려 필요 (확률형 아이템 고지 의무)

### 옵션 D: 광고 없는 완전 무료 유지
- 커뮤니티 기반 성장, Patreon 등 후원 모델
- 현재 방향

---

## 9. 상점 UI 설정값 위치

상점 박스 가격 및 확률 변경 시 수정 파일:

```
src/components/shop/ShopView.tsx
  → BOX_TIERS 배열의 cost, descKo 수정
  → rollByTier() 함수의 확률 분기 수정

src/data/items.ts
  → ROLL_RATES 상수 (기본 박스용)
```

> **주의**: `ShopView.tsx`의 `descKo` 텍스트와 `rollByTier()` 함수의 실제 확률이 **일치**해야 함. 수정 시 둘 다 변경 필요.
